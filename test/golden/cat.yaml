in_source: |-
  #include "stdlib/io.fs"

  : endless_loop
    begin
      read_value
      print
      1
    until
  ;

  endless_loop

in_stdin: |-
  20 a
  150 b

out_instructions: !!binary |
  AAAAAAAEEQQAAAAB//5jBAAAAAIABGACAAAAAwAAEQQAAAAE//5jBAAAAAUABGACAAAABgAAYQMA
  AAAHAAJjBAAAAAgAAGGDAAAACQACYwQAAAAKAAQwAgAAAAsAAAAZAAAADAAEEQQAAAAN//5jBAAA
  AA4ABGACAAAADwAAYQMAAAAQAAJjBAAAABEAACEDAAAAEv/+YwQAAAATAARgAgAAABQAAGEDAAAA
  FQACYwQAAAAWAAImkQAAABcABhEEAAAAGP/+YwQAAAAZAARgAgAAABoAAGEDAAAAGwACYwQAAAAc
  AAAhAwAAAB3//mMEAAAAHgAEYAIAAAAfAAARBAAAACD//mMEAAAAIQAEYAIAAAAiAAACFQAAACMA
  AhEEAAAAJP/+YwQAAAAlAARgAgAAACYAAGEDAAAAJwACYwQAAAAo/8IiEgAAACkAAGEDAAAAKgAC
  YwQAAAArAAIRhAAAACwABDACAAAALQACEQQAAAAu//5jBAAAAC8ABGACAAAAMAAAYQMAAAAxAAJj
  BAAAADL/gicSAAAAMwAAABcAAAOEAAYRBAAAA4X//mMEAAADhgAEYAIAAAOHAAARhAAAA4gAADED
  AAADif/+YwQAAAOKAARgAgAAA4sAAGEDAAADjAACYwQAAAONAABhgwAAA44AAmMEAAADjwAEMAIA
  AAOQAAQRBAAAA5H//mMEAAADkgAEYAIAAAOTAAIRBAAAA5T//mMEAAADlQAEYAIAAAOWAABhAwAA
  A5cAAmMEAAADmAAAYYMAAAOZAAJjBAAAA5oABDACAAADmwAAABoAAAOcAAAAGA==

out_stdout: |
  source LoC: 11 code instr: 77
  ============================================================
  output_buffer_str:
  ab
  output_buffer_num:
  [97, 98]

out_log: |-
  DEBUG   machine:simulation    STATE: NORMAL	TICK:   0 PC:   0/0 ADDR:   0 MEM_OUT:   0 T0:   0 T1:   0 T2:   0 T3:   0 SP: 1000 	addi t0, zero, 2
  DEBUG   machine:simulation    STATE: NORMAL	TICK:   1 PC:   1/0 ADDR:   0 MEM_OUT:   0 T0:   2 T1:   0 T2:   0 T3:   0 SP: 1000 	addi sp, sp, -1
  DEBUG   machine:simulation    STATE: NORMAL	TICK:   2 PC:   2/0 ADDR:   0 MEM_OUT:   0 T0:   2 T1:   0 T2:   0 T3:   0 SP: 999 	sw sp, t0, 0
  DEBUG   machine:simulation    STATE: NORMAL	TICK:   3 PC:   2/1 ADDR: 999 MEM_OUT:   0 T0:   2 T1:   0 T2:   0 T3:   0 SP: 999 	sw sp, t0, 0
  DEBUG   machine:simulation    STATE: NORMAL	TICK:   4 PC:   3/0 ADDR: 999 MEM_OUT:   2 T0:   2 T1:   0 T2:   0 T3:   0 SP: 999 	addi t0, zero, 0
  DEBUG   machine:simulation    STATE: NORMAL	TICK:   5 PC:   4/0 ADDR: 999 MEM_OUT:   2 T0:   0 T1:   0 T2:   0 T3:   0 SP: 999 	addi sp, sp, -1
  DEBUG   machine:simulation    STATE: NORMAL	TICK:   6 PC:   5/0 ADDR: 999 MEM_OUT:   2 T0:   0 T1:   0 T2:   0 T3:   0 SP: 998 	sw sp, t0, 0
  DEBUG   machine:simulation    STATE: NORMAL	TICK:   7 PC:   5/1 ADDR: 998 MEM_OUT:   0 T0:   0 T1:   0 T2:   0 T3:   0 SP: 998 	sw sp, t0, 0
  DEBUG   machine:simulation    STATE: NORMAL	TICK:   8 PC:   6/0 ADDR: 998 MEM_OUT:   0 T0:   0 T1:   0 T2:   0 T3:   0 SP: 998 	lw t0, sp, 0
  DEBUG   machine:simulation    STATE: NORMAL	TICK:   9 PC:   6/1 ADDR: 998 MEM_OUT:   0 T0:   0 T1:   0 T2:   0 T3:   0 SP: 998 	lw t0, sp, 0
  DEBUG   machine:simulation    STATE: NORMAL	TICK:  10 PC:   7/0 ADDR: 998 MEM_OUT:   0 T0:   0 T1:   0 T2:   0 T3:   0 SP: 998 	addi sp, sp, 1
  DEBUG   machine:simulation    STATE: NORMAL	TICK:  11 PC:   8/0 ADDR: 998 MEM_OUT:   0 T0:   0 T1:   0 T2:   0 T3:   0 SP: 999 	lw t1, sp, 0
  DEBUG   machine:simulation    STATE: NORMAL	TICK:  12 PC:   8/1 ADDR: 999 MEM_OUT:   2 T0:   0 T1:   0 T2:   0 T3:   0 SP: 999 	lw t1, sp, 0
  DEBUG   machine:simulation    STATE: NORMAL	TICK:  13 PC:   9/0 ADDR: 999 MEM_OUT:   2 T0:   0 T1:   2 T2:   0 T3:   0 SP: 999 	addi sp, sp, 1
  DEBUG   machine:simulation    STATE: NORMAL	TICK:  14 PC:  10/0 ADDR: 999 MEM_OUT:   2 T0:   0 T1:   2 T2:   0 T3:   0 SP: 1000 	sw t1, t0, 0
  DEBUG   machine:simulation    STATE: NORMAL	TICK:  15 PC:  10/1 ADDR:   2 MEM_OUT:   0 T0:   0 T1:   2 T2:   0 T3:   0 SP: 1000 	sw t1, t0, 0
  DEBUG   machine:simulation    STATE: NORMAL	TICK:  16 PC:  11/0 ADDR:   2 MEM_OUT:   0 T0:   0 T1:   2 T2:   0 T3:   0 SP: 1000 	eint
  DEBUG   machine:simulation    STATE: NORMAL	TICK:  17 PC:  12/0 ADDR:   2 MEM_OUT:   0 T0:   0 T1:   2 T2:   0 T3:   0 SP: 1000 	addi t0, zero, 2
  DEBUG   machine:simulation    STATE: NORMAL	TICK:  18 PC:  13/0 ADDR:   2 MEM_OUT:   0 T0:   2 T1:   2 T2:   0 T3:   0 SP: 1000 	addi sp, sp, -1
  DEBUG   machine:simulation    STATE: NORMAL	TICK:  19 PC:  14/0 ADDR:   2 MEM_OUT:   0 T0:   2 T1:   2 T2:   0 T3:   0 SP: 999 	sw sp, t0, 0
  DEBUG   machine:simulation    STATE: NORMAL	TICK:  20 PC:  14/1 ADDR: 999 MEM_OUT:   2 T0:   2 T1:   2 T2:   0 T3:   0 SP: 999 	sw sp, t0, 0
  DEBUG   control_unit:process_next_tick Interrupt request on tick 20 with value "a" | 97
  DEBUG   machine:simulation    STATE: NORMAL	TICK:  21 PC:  15/0 ADDR: 999 MEM_OUT:   2 T0:   2 T1:   2 T2:   0 T3:   0 SP: 999 	lw t0, sp, 0
  DEBUG   machine:simulation    STATE: INT_ENTER	TICK:  22 PC:  15/0 ADDR: 999 MEM_OUT:   2 T0:   2 T1:   2 T2:   0 T3:   0 SP: 999 	lw t0, sp, 0
  DEBUG   machine:simulation    STATE: INT_ENTER	TICK:  23 PC:  15/1 ADDR: 999 MEM_OUT:   2 T0:   2 T1:   2 T2:   0 T3:   0 SP: 999 	lw t0, sp, 0
  DEBUG   machine:simulation    STATE: INT_BODY	TICK:  24 PC: 900/0 ADDR: 999 MEM_OUT:   2 T0:   2 T1:   2 T2:   0 T3:   0 SP: 999 	addi t0, zero, 3
  DEBUG   machine:simulation    STATE: INT_BODY	TICK:  25 PC: 901/0 ADDR: 999 MEM_OUT:   2 T0:   3 T1:   2 T2:   0 T3:   0 SP: 999 	addi sp, sp, -1
  DEBUG   machine:simulation    STATE: INT_BODY	TICK:  26 PC: 902/0 ADDR: 999 MEM_OUT:   2 T0:   3 T1:   2 T2:   0 T3:   0 SP: 998 	sw sp, t0, 0
  DEBUG   machine:simulation    STATE: INT_BODY	TICK:  27 PC: 90EOF

out_instructions_hex: |2-
    0 - 00041104 - 00000000000001000001000100000100 - addi t0, zero, 2
    1 - FFFE6304 - 11111111111111100110001100000100 - addi sp, sp, -1
    2 - 00046002 - 00000000000001000110000000000010 - sw sp, t0, 0
    3 - 00001104 - 00000000000000000001000100000100 - addi t0, zero, 0
    4 - FFFE6304 - 11111111111111100110001100000100 - addi sp, sp, -1
    5 - 00046002 - 00000000000001000110000000000010 - sw sp, t0, 0
    6 - 00006103 - 00000000000000000110000100000011 - lw t0, sp, 0
    7 - 00026304 - 00000000000000100110001100000100 - addi sp, sp, 1
    8 - 00006183 - 00000000000000000110000110000011 - lw t1, sp, 0
    9 - 00026304 - 00000000000000100110001100000100 - addi sp, sp, 1
   10 - 00043002 - 00000000000001000011000000000010 - sw t1, t0, 0
   11 - 00000019 - 00000000000000000000000000011001 - eint
   12 - 00041104 - 00000000000001000001000100000100 - addi t0, zero, 2
   13 - FFFE6304 - 11111111111111100110001100000100 - addi sp, sp, -1
   14 - 00046002 - 00000000000001000110000000000010 - sw sp, t0, 0
   15 - 00006103 - 00000000000000000110000100000011 - lw t0, sp, 0
   16 - 00026304 - 00000000000000100110001100000100 - addi sp, sp, 1
   17 - 00002103 - 00000000000000000010000100000011 - lw t0, t0, 0
   18 - FFFE6304 - 11111111111111100110001100000100 - addi sp, sp, -1
   19 - 00046002 - 00000000000001000110000000000010 - sw sp, t0, 0
   20 - 00006103 - 00000000000000000110000100000011 - lw t0, sp, 0
   21 - 00026304 - 00000000000000100110001100000100 - addi sp, sp, 1
   22 - 00022691 - 00000000000000100010011010010001 - beq t0, zero, 13
   23 - 00061104 - 00000000000001100001000100000100 - addi t0, zero, 3
   24 - FFFE6304 - 11111111111111100110001100000100 - addi sp, sp, -1
   25 - 00046002 - 00000000000001000110000000000010 - sw sp, t0, 0
   26 - 00006103 - 00000000000000000110000100000011 - lw t0, sp, 0
   27 - 00026304 - 00000000000000100110001100000100 - addi sp, sp, 1
   28 - 00002103 - 00000000000000000010000100000011 - lw t0, t0, 0
   29 - FFFE6304 - 11111111111111100110001100000100 - addi sp, sp, -1
   30 - 00046002 - 00000000000001000110000000000010 - sw sp, t0, 0
   31 - 00001104 - 00000000000000000001000100000100 - addi t0, zero, 0
   32 - FFFE6304 - 11111111111111100110001100000100 - addi sp, sp, -1
   33 - 00046002 - 00000000000001000110000000000010 - sw sp, t0, 0
   34 - 00000215 - 00000000000000000000001000010101 - j 4
   35 - 00021104 - 00000000000000100001000100000100 - addi t0, zero, 1
   36 - FFFE6304 - 11111111111111100110001100000100 - addi sp, sp, -1
   37 - 00046002 - 00000000000001000110000000000010 - sw sp, t0, 0
   38 - 00006103 - 00000000000000000110000100000011 - lw t0, sp, 0
   39 - 00026304 - 00000000000000100110001100000100 - addi sp, sp, 1
   40 - FFC22212 - 11111111110000100010001000010010 - bne t0, zero, -28
   41 - 00006103 - 00000000000000000110000100000011 - lw t0, sp, 0
   42 - 00026304 - 00000000000000100110001100000100 - addi sp, sp, 1
   43 - 00021184 - 00000000000000100001000110000100 - addi t1, zero, 1
   44 - 00043002 - 00000000000001000011000000000010 - sw t1, t0, 0
   45 - 00021104 - 00000000000000100001000100000100 - addi t0, zero, 1
   46 - FFFE6304 - 11111111111111100110001100000100 - addi sp, sp, -1
   47 - 00046002 - 00000000000001000110000000000010 - sw sp, t0, 0
   48 - 00006103 - 00000000000000000110000100000011 - lw t0, sp, 0
   49 - 00026304 - 00000000000000100110001100000100 - addi sp, sp, 1
   50 - FF822712 - 11111111100000100010011100010010 - bne t0, zero, -50
   51 - 00000017 - 00000000000000000000000000010111 - halt
  900 - 00061104 - 00000000000001100001000100000100 - addi t0, zero, 3
  901 - FFFE6304 - 11111111111111100110001100000100 - addi sp, sp, -1
  902 - 00046002 - 00000000000001000110000000000010 - sw sp, t0, 0
  903 - 00001184 - 00000000000000000001000110000100 - addi t1, zero, 0
  904 - 00003103 - 00000000000000000011000100000011 - lw t0, t1, 0
  905 - FFFE6304 - 11111111111111100110001100000100 - addi sp, sp, -1
  906 - 00046002 - 00000000000001000110000000000010 - sw sp, t0, 0
  907 - 00006103 - 00000000000000000110000100000011 - lw t0, sp, 0
  908 - 00026304 - 00000000000000100110001100000100 - addi sp, sp, 1
  909 - 00006183 - 00000000000000000110000110000011 - lw t1, sp, 0
  910 - 00026304 - 00000000000000100110001100000100 - addi sp, sp, 1
  911 - 00043002 - 00000000000001000011000000000010 - sw t1, t0, 0
  912 - 00041104 - 00000000000001000001000100000100 - addi t0, zero, 2
  913 - FFFE6304 - 11111111111111100110001100000100 - addi sp, sp, -1
  914 - 00046002 - 00000000000001000110000000000010 - sw sp, t0, 0
  915 - 00021104 - 00000000000000100001000100000100 - addi t0, zero, 1
  916 - FFFE6304 - 11111111111111100110001100000100 - addi sp, sp, -1
  917 - 00046002 - 00000000000001000110000000000010 - sw sp, t0, 0
  918 - 00006103 - 00000000000000000110000100000011 - lw t0, sp, 0
  919 - 00026304 - 00000000000000100110001100000100 - addi sp, sp, 1
  920 - 00006183 - 00000000000000000110000110000011 - lw t1, sp, 0
  921 - 00026304 - 00000000000000100110001100000100 - addi sp, sp, 1
  922 - 00043002 - 00000000000001000011000000000010 - sw t1, t0, 0
  923 - 0000001A - 00000000000000000000000000011010 - dint
  924 - 00000018 - 00000000000000000000000000011000 - rint

out_data_hex: |2-
    2 - 00000000 - 00000000000000000000000000000000
    3 - 00000000 - 00000000000000000000000000000000
out_data: !!binary |
  AAAAAgAAAAAAAAADAAAAAA==
